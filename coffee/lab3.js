// Generated by CoffeeScript 2.7.0
var board, boardDiv, clearHighlights, echo, game, highlightSquare, lastMove, selectedSquare;

echo = console.log;

echo('adam');

// Starta nytt spel
game = new Chess();

// Hämta DOM-elementet
boardDiv = document.getElementById('board');

// Skapa brädet utan drag-and-drop 
board = Chessboard(boardDiv, {
  draggable: false,
  position: 'start'
});

// Spara vald frånruta
selectedSquare = null;

// Spara senaste draget
lastMove = null;

// Rensa alla highlights
clearHighlights = function() {
  var i, len, results, square, squares;
  squares = boardDiv.querySelectorAll('.square-55d63');
  results = [];
  for (i = 0, len = squares.length; i < len; i++) {
    square = squares[i];
    results.push(square.style.background = '');
  }
  return results;
};

// Highlighta en ruta
highlightSquare = function(square, color = '#a9a9a9') {
  var el;
  el = boardDiv.querySelector(`[data-square='${square}']`);
  if (el) {
    return el.style.background = color;
  }
};

// Lägg på klickhantering
boardDiv.addEventListener('click', function(event) {
  var move, square, target;
  target = event.target;
  echo(target.classList);
  // Om klick på ruta
  if (target.classList.contains('square-55d63')) {
    square = target.getAttribute('data-square');
    if (selectedSquare) {
      // Andra klicket → försök göra drag
      move = game.move({
        from: selectedSquare,
        to: square,
        promotion: 'q'
      });
      if (move) {
        board.position(game.fen());
        lastMove = move;
        // Efter lyckat drag:
        clearHighlights();
        highlightSquare(move.from, '#f6f669'); // Ljusgul frånruta
        highlightSquare(move.to, '#baca44'); // Ljusgrön toruta
      }
      
      // Nollställ efter försök
      return selectedSquare = null;
    } else {
      // Första klicket
      selectedSquare = square;
      clearHighlights();
      // Visa senaste drag
      if (lastMove) {
        highlightSquare(lastMove.from, '#f6f669');
        highlightSquare(lastMove.to, '#baca44');
      }
      // Markera vald ruta
      return highlightSquare(square, '#a9a9a9');
    }
  }
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGFiMy5qcyIsInNvdXJjZVJvb3QiOiIuLlxcIiwic291cmNlcyI6WyJjb2ZmZWVcXGxhYjMuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFBLEtBQUEsRUFBQSxRQUFBLEVBQUEsZUFBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsZUFBQSxFQUFBLFFBQUEsRUFBQTs7QUFBQSxJQUFBLEdBQU8sT0FBTyxDQUFDOztBQUNmLElBQUEsQ0FBSyxNQUFMLEVBREE7OztBQUdBLElBQUEsR0FBTyxJQUFJLEtBQUosQ0FBQSxFQUhQOzs7QUFNQSxRQUFBLEdBQVcsUUFBUSxDQUFDLGNBQVQsQ0FBd0IsT0FBeEIsRUFOWDs7O0FBU0EsS0FBQSxHQUFRLFVBQUEsQ0FBVyxRQUFYLEVBQ047RUFBQSxTQUFBLEVBQVcsS0FBWDtFQUNBLFFBQUEsRUFBVTtBQURWLENBRE0sRUFUUjs7O0FBZUEsY0FBQSxHQUFpQixLQWZqQjs7O0FBa0JBLFFBQUEsR0FBVyxLQWxCWDs7O0FBcUJBLGVBQUEsR0FBa0IsUUFBQSxDQUFBLENBQUE7QUFDbEIsTUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBLE9BQUEsRUFBQSxNQUFBLEVBQUE7RUFBRSxPQUFBLEdBQVUsUUFBUSxDQUFDLGdCQUFULENBQTBCLGVBQTFCO0FBQ1Y7RUFBQSxLQUFBLHlDQUFBOztpQkFDRSxNQUFNLENBQUMsS0FBSyxDQUFDLFVBQWIsR0FBMEI7RUFENUIsQ0FBQTs7QUFGZ0IsRUFyQmxCOzs7QUEyQkEsZUFBQSxHQUFrQixRQUFBLENBQUMsTUFBRCxFQUFTLFFBQVEsU0FBakIsQ0FBQTtBQUNsQixNQUFBO0VBQUUsRUFBQSxHQUFLLFFBQVEsQ0FBQyxhQUFULENBQXVCLENBQUEsY0FBQSxDQUFBLENBQWlCLE1BQWpCLENBQUEsRUFBQSxDQUF2QjtFQUNMLElBQUcsRUFBSDtXQUNFLEVBQUUsQ0FBQyxLQUFLLENBQUMsVUFBVCxHQUFzQixNQUR4Qjs7QUFGZ0IsRUEzQmxCOzs7QUFpQ0EsUUFBUSxDQUFDLGdCQUFULENBQTBCLE9BQTFCLEVBQW1DLFFBQUEsQ0FBQyxLQUFELENBQUE7QUFFbkMsTUFBQSxJQUFBLEVBQUEsTUFBQSxFQUFBO0VBQUUsTUFBQSxHQUFTLEtBQUssQ0FBQztFQUNmLElBQUEsQ0FBSyxNQUFNLENBQUMsU0FBWixFQURGOztFQUdFLElBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxRQUFqQixDQUEwQixjQUExQixDQUFIO0lBRUUsTUFBQSxHQUFTLE1BQU0sQ0FBQyxZQUFQLENBQW9CLGFBQXBCO0lBRVQsSUFBRyxjQUFIOztNQUVFLElBQUEsR0FBTyxJQUFJLENBQUMsSUFBTCxDQUNMO1FBQUEsSUFBQSxFQUFNLGNBQU47UUFDQSxFQUFBLEVBQUksTUFESjtRQUVBLFNBQUEsRUFBVztNQUZYLENBREs7TUFNUCxJQUFHLElBQUg7UUFDRSxLQUFLLENBQUMsUUFBTixDQUFlLElBQUksQ0FBQyxHQUFMLENBQUEsQ0FBZjtRQUNBLFFBQUEsR0FBVyxLQURuQjs7UUFHUSxlQUFBLENBQUE7UUFDQSxlQUFBLENBQWdCLElBQUksQ0FBQyxJQUFyQixFQUEyQixTQUEzQixFQUpSO1FBS1EsZUFBQSxDQUFnQixJQUFJLENBQUMsRUFBckIsRUFBeUIsU0FBekIsRUFORjtPQVBOOzs7YUFnQk0sY0FBQSxHQUFpQixLQWpCbkI7S0FBQSxNQUFBOztNQXFCRSxjQUFBLEdBQWlCO01BQ2pCLGVBQUEsQ0FBQSxFQUZOOztNQUtNLElBQUcsUUFBSDtRQUNFLGVBQUEsQ0FBZ0IsUUFBUSxDQUFDLElBQXpCLEVBQStCLFNBQS9CO1FBQ0EsZUFBQSxDQUFnQixRQUFRLENBQUMsRUFBekIsRUFBNkIsU0FBN0IsRUFGRjtPQUxOOzthQVVNLGVBQUEsQ0FBZ0IsTUFBaEIsRUFBd0IsU0FBeEIsRUE5QkY7S0FKRjs7QUFMaUMsQ0FBbkMiLCJzb3VyY2VzQ29udGVudCI6WyJlY2hvID0gY29uc29sZS5sb2dcclxuZWNobyAnYWRhbSdcclxuIyBTdGFydGEgbnl0dCBzcGVsXHJcbmdhbWUgPSBuZXcgQ2hlc3MoKVxyXG5cclxuIyBIw6RtdGEgRE9NLWVsZW1lbnRldFxyXG5ib2FyZERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib2FyZCcpXHJcblxyXG4jIFNrYXBhIGJyw6RkZXQgdXRhbiBkcmFnLWFuZC1kcm9wIFxyXG5ib2FyZCA9IENoZXNzYm9hcmQoYm9hcmREaXYsXHJcbiAgZHJhZ2dhYmxlOiBmYWxzZVxyXG4gIHBvc2l0aW9uOiAnc3RhcnQnXHJcbilcclxuXHJcbiMgU3BhcmEgdmFsZCBmcsOlbnJ1dGFcclxuc2VsZWN0ZWRTcXVhcmUgPSBudWxsXHJcblxyXG4jIFNwYXJhIHNlbmFzdGUgZHJhZ2V0XHJcbmxhc3RNb3ZlID0gbnVsbFxyXG5cclxuIyBSZW5zYSBhbGxhIGhpZ2hsaWdodHNcclxuY2xlYXJIaWdobGlnaHRzID0gLT5cclxuICBzcXVhcmVzID0gYm9hcmREaXYucXVlcnlTZWxlY3RvckFsbCgnLnNxdWFyZS01NWQ2MycpXHJcbiAgZm9yIHNxdWFyZSBpbiBzcXVhcmVzXHJcbiAgICBzcXVhcmUuc3R5bGUuYmFja2dyb3VuZCA9ICcnXHJcblxyXG4jIEhpZ2hsaWdodGEgZW4gcnV0YVxyXG5oaWdobGlnaHRTcXVhcmUgPSAoc3F1YXJlLCBjb2xvciA9ICcjYTlhOWE5JykgLT5cclxuICBlbCA9IGJvYXJkRGl2LnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1zcXVhcmU9JyN7c3F1YXJlfSddXCIpXHJcbiAgaWYgZWxcclxuICAgIGVsLnN0eWxlLmJhY2tncm91bmQgPSBjb2xvclxyXG5cclxuIyBMw6RnZyBww6Uga2xpY2toYW50ZXJpbmdcclxuYm9hcmREaXYuYWRkRXZlbnRMaXN0ZW5lciAnY2xpY2snLCAoZXZlbnQpIC0+XHJcblxyXG4gIHRhcmdldCA9IGV2ZW50LnRhcmdldFxyXG4gIGVjaG8gdGFyZ2V0LmNsYXNzTGlzdFxyXG4gICMgT20ga2xpY2sgcMOlIHJ1dGFcclxuICBpZiB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzcXVhcmUtNTVkNjMnKVxyXG5cclxuICAgIHNxdWFyZSA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3F1YXJlJylcclxuXHJcbiAgICBpZiBzZWxlY3RlZFNxdWFyZVxyXG4gICAgICAjIEFuZHJhIGtsaWNrZXQg4oaSIGbDtnJzw7ZrIGfDtnJhIGRyYWdcclxuICAgICAgbW92ZSA9IGdhbWUubW92ZShcclxuICAgICAgICBmcm9tOiBzZWxlY3RlZFNxdWFyZVxyXG4gICAgICAgIHRvOiBzcXVhcmVcclxuICAgICAgICBwcm9tb3Rpb246ICdxJ1xyXG4gICAgICApXHJcblxyXG4gICAgICBpZiBtb3ZlXHJcbiAgICAgICAgYm9hcmQucG9zaXRpb24oZ2FtZS5mZW4oKSlcclxuICAgICAgICBsYXN0TW92ZSA9IG1vdmVcclxuICAgICAgICAjIEVmdGVyIGx5Y2thdCBkcmFnOlxyXG4gICAgICAgIGNsZWFySGlnaGxpZ2h0cygpXHJcbiAgICAgICAgaGlnaGxpZ2h0U3F1YXJlKG1vdmUuZnJvbSwgJyNmNmY2NjknKSAgIyBManVzZ3VsIGZyw6VucnV0YVxyXG4gICAgICAgIGhpZ2hsaWdodFNxdWFyZShtb3ZlLnRvLCAnI2JhY2E0NCcpICAgICMgTGp1c2dyw7ZuIHRvcnV0YVxyXG5cclxuICAgICAgIyBOb2xsc3TDpGxsIGVmdGVyIGbDtnJzw7ZrXHJcbiAgICAgIHNlbGVjdGVkU3F1YXJlID0gbnVsbFxyXG5cclxuICAgIGVsc2VcclxuICAgICAgIyBGw7Zyc3RhIGtsaWNrZXRcclxuICAgICAgc2VsZWN0ZWRTcXVhcmUgPSBzcXVhcmVcclxuICAgICAgY2xlYXJIaWdobGlnaHRzKClcclxuXHJcbiAgICAgICMgVmlzYSBzZW5hc3RlIGRyYWdcclxuICAgICAgaWYgbGFzdE1vdmVcclxuICAgICAgICBoaWdobGlnaHRTcXVhcmUobGFzdE1vdmUuZnJvbSwgJyNmNmY2NjknKVxyXG4gICAgICAgIGhpZ2hsaWdodFNxdWFyZShsYXN0TW92ZS50bywgJyNiYWNhNDQnKVxyXG5cclxuICAgICAgIyBNYXJrZXJhIHZhbGQgcnV0YVxyXG4gICAgICBoaWdobGlnaHRTcXVhcmUoc3F1YXJlLCAnI2E5YTlhOScpXHJcbiJdfQ==
//# sourceURL=c:\github\TerrangSchack\coffee\lab3.coffee